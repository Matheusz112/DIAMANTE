<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plataforma de Vídeos</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/@babel/standalone@7.24.7/babel.min.js"></script>
  <script src="https://player.vimeo.com/api/player.js"></script>
  <style>
    body {
      background: linear-gradient(135deg, #1a1a1a 0%, #2c2c2c 100%);
      color: #ffffff;
      font-family: 'Inter', sans-serif;
      margin: 0;
      overscroll-behavior: none;
    }
    .neon-blue {
      color: #00f7ff;
      text-shadow: 0 0 5px #00f7ff, 0 0 10px #00f7ff;
    }
    .neon-gold {
      color: #ffd700;
      text-shadow: 0 0 5px #ffd700, 0 0 10px #ffd700;
    }
    .neon-border {
      border: 1px solid #00f7ff;
      box-shadow: 0 0 10px #00f7ff;
    }
    .vip-badge {
      background: linear-gradient(45deg, #ffd700, #ffaa00);
      color: #1a1a1a;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: bold;
      box-shadow: 0 0 8px #ffd700;
    }
    .icon-button {
      background: linear-gradient(45deg, #00f7ff, #007bff);
      padding: 10px;
      border-radius: 50%;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }
    .icon-button:hover, .icon-button:focus {
      transform: scale(1.2);
      box-shadow: 0 0 15px rgba(0, 247, 255, 0.7);
    }
    .icon-button:active {
      transform: scale(0.95);
    }
    .tooltip {
      visibility: hidden;
      background: #2c2c2c;
      color: #fff;
      text-align: center;
      padding: 5px 10px;
      border-radius: 6px;
      position: absolute;
      z-index: 10;
      bottom: 120%;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.75rem;
      white-space: nowrap;
    }
    .icon-button:hover .tooltip, .icon-button:focus .tooltip {
      visibility: visible;
    }
    .comment-enter {
      opacity: 0;
      transform: translateY(20px);
    }
    .comment-enter-active {
      opacity: 1;
      transform: translateY(0);
      transition: opacity 0.5s ease, transform 0.5s ease;
    }
    .video-container {
      position: relative;
      padding-bottom: 56.25%;
      height: 0;
      overflow: hidden;
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0, 247, 255, 0.2);
    }
    .video-container iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-radius: 8px;
    }
    .modal {
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(5px);
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .modal-content {
      background: #2c2c2c;
      padding: 1.5rem;
      border-radius: 12px;
      max-width: 90%;
      width: 500px;
      box-shadow: 0 0 20px rgba(0, 247, 255, 0.3);
    }
    .avatar-option {
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .avatar-option:hover, .avatar-option:focus {
      transform: scale(1.1);
      box-shadow: 0 0 10px #00f7ff;
    }
    .avatar-selected {
      border: 3px solid #00f7ff;
      box-shadow: 0 0 15px #00f7ff;
    }
    .error-boundary {
      padding: 20px;
      background: #ff4444;
      color: white;
      text-align: center;
    }
    .video-fallback {
      background: #2c2c2c;
      padding: 20px;
      border-radius: 8px;
      text-align: center;
      color: #ff4444;
      font-weight: bold;
    }
    @media (max-width: 640px) {
      .header-logo {
        height: 2.5rem;
      }
      .video-title {
        font-size: 1.25rem;
      }
      .action-buttons {
        flex-direction: column;
        align-items: center;
        gap: 0.75rem;
      }
      .comment-section {
        padding: 0.5rem;
      }
      .comment-box {
        padding: 1rem;
      }
      .modal-content {
        padding: 1rem;
        width: 95%;
      }
      .feedback-section textarea {
        font-size: 0.875rem;
      }
      .feedback-section button {
        padding: 0.5rem 1.5rem;
      }
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    // Error Boundary to catch rendering issues
    class ErrorBoundary extends React.Component {
      state = { hasError: false, error: null };
      static getDerivedStateFromError(error) {
        return { hasError: true, error };
      }
      render() {
        if (this.state.hasError) {
          return (
            <div className="error-boundary">
              <h1>Algo deu errado: {this.state.error?.message}</h1>
              <p>Por favor, recarregue a página ou contate o suporte.</p>
            </div>
          );
        }
        return this.props.children;
      }
    }

    function Header() {
      return (
        <header className="bg-gray-900 p-4 flex justify-center shadow-lg">
          <img
            src="https://i.postimg.cc/7ZTMyp55/Futura-Display-3-1.jpg"
            alt="Logo"
            className="header-logo h-16 sm:h-12 rounded"
          />
        </header>
      );
    }

    function VideoPlayer() {
      const [videoError, setVideoError] = React.useState(false);

      const handleVideoError = () => {
        setVideoError(true);
      };

      return (
        <div className="mx-auto max-w-5xl mt-8 px-4 sm:px-2">
          <h2 className="video-title text-2xl sm:text-xl font-semibold neon-blue mb-4">NOVA ATUALIZAÇÃO DIAMANTE LEGACY! - CASSINO (+18)</h2>
          {videoError ? (
            <div className="video-fallback">
              <p>Vídeo não carregou. Tente recarregar a página ou usar um servidor local (ex.: python -m http.server 8000).</p>
              <p>Se o problema persistir, verifique a conexão ou contate o suporte.</p>
            </div>
          ) : (
            <div className="video-container">
              <iframe
                src="https://player.vimeo.com/video/1077787708?h=907138132e&badge=0&autopause=0&player_id=0&app_id=58479"
                frameBorder="0"
                allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media"
                style={{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%' }}
                title="NOVA ATUALIZAÇÃO DIAMANTE LEGACY! - CASSINO (+18)"
                onError={handleVideoError}
              ></iframe>
            </div>
          )}
        </div>
      );
    }

    function VideoActions({ onCommentClick }) {
      const [likes, setLikes] = React.useState(() => {
        const savedLikes = localStorage.getItem('likes');
        return savedLikes ? parseInt(savedLikes, 10) : 131;
      });
      const [isFullscreen, setIsFullscreen] = React.useState(false);

      React.useEffect(() => {
        const interval = setInterval(() => {
          setLikes(prevLikes => {
            const newLikes = prevLikes + 1;
            localStorage.setItem('likes', newLikes);
            return newLikes;
          });
        }, 20000);
        return () => clearInterval(interval);
      }, []);

      const handleLikeClick = () => {
        setLikes(prevLikes => {
          const newLikes = prevLikes + 1;
          localStorage.setItem('likes', newLikes);
          return newLikes;
        });
      };

      const handleFullscreenToggle = () => {
        const videoContainer = document.querySelector('.video-container');
        if (!isFullscreen) {
          if (videoContainer.requestFullscreen) {
            videoContainer.requestFullscreen();
          } else if (videoContainer.webkitRequestFullscreen) {
            videoContainer.webkitRequestFullscreen();
          } else if (videoContainer.msRequestFullscreen) {
            videoContainer.msRequestFullscreen();
          }
        } else {
          if (document.exitFullscreen) {
            document.exitFullscreen();
          } else if (document.webkitExitFullscreen) {
            document.webkitExitFullscreen();
          } else if (document.msExitFullscreen) {
            document.msExitFullscreen();
          }
        }
        setIsFullscreen(!isFullscreen);
      };

      return (
        <div className="action-buttons flex sm:flex-col items-center justify-center space-x-4 sm:space-x-0 sm:space-y-3 mt-6 max-w-5xl mx-auto px-4 sm:px-2">
          <button
            onClick={handleLikeClick}
            className="icon-button relative"
            aria-label="Curtir"
          >
            <i className="fas fa-thumbs-up text-lg"></i>
            <span className="ml-2 sm:ml-0 text-sm">{likes}</span>
            <span className="tooltip">Curtir</span>
          </button>
          <button
            className="icon-button relative"
            aria-label="Não Curtir"
          >
            <i className="fas fa-thumbs-down text-lg"></i>
            <span className="ml-2 sm:ml-0 text-sm">12</span>
            <span className="tooltip">Não Curtir</span>
          </button
          <button
            className="icon-button relative"
            aria-label="Compartilhar"
          >
            <i className="fas fa-share text-lg"></i>
            <span className="tooltip">Compartilhar</span>
          </button>
          <button
            onClick={handleFullscreenToggle}
            className="icon-button relative"
            aria-label={isFullscreen ? "Sair do Modo Tela Cheia" : "Entrar no Modo Tela Cheia"}
          >
            <i className={isFullscreen ? "fas fa-compress" : "fas fa-expand"}></i>
            <span className="tooltip">{isFullscreen ? "Sair Tela Cheia" : "Tela Cheia"}</span>
          </button>
          <button
            onClick={onCommentClick}
            className="icon-button relative"
            aria-label="Comentar"
          >
            <i className="fas fa-comment text-lg"></i>
            <span className="tooltip">Comentar</span>
          </button>
        </div>
      );
    }

    function CommentFormModal({ isOpen, onClose, onSubmit }) {
      const [name, setName] = React.useState("");
      const [avatar, setAvatar] = React.useState("");
      const [comment, setComment] = React.useState("");
      const avatars = [
        "https://wallpapers.com/images/hd/cute-avatar-profile-picture-23yuqpb8wz1dqqqv.jpg",
        "https://i.pinimg.com/originals/2c/47/d5/2c47d5dd5b532f83bb55c4cd6f5bd1ef.jpg",
        "https://imgsrv2.voi.id/WjEqMKzrXoQQvMyNmpfJrb69U5WO2jgd1eqrHg-lOyA/auto/1200/675/sm/1/bG9jYWw6Ly8vcHVibGlzaGVycy8zNDMxMTEvMjAyMzEyMjkxMzI1LW1haW4uY3JvcHBlZF8xNzAzODM0OTI5LmpwZWc.jpg",
      ];

      const handleSubmit = (e) => {
        e.preventDefault();
        if (name.trim() && comment.trim() && avatar) {
          onSubmit({ name, avatar, comment });
          setName("");
          setAvatar("");
          setComment("");
          onClose();
        }
      };

      if (!isOpen) return null;

      return (
        <div className="modal">
          <div className="modal-content">
            <h2 className="text-xl sm:text-lg neon-blue mb-4">Adicionar Comentário</h2>
            <div className="mb-4">
              <label className="block text-sm mb-1">Seu Nome</label>
              <input
                type="text"
                value={name}
                onChange={(e) => setName(e.target.value)}
                placeholder="Digite seu nome"
                className="w-full p-2 bg-gray-800 text-white rounded neon-border focus:outline-none text-sm"
              />
            </div>
            <div className="mb-4">
              <label className="block text-sm mb-1">Escolha um Avatar</label>
              <div className="flex space-x-2">
                {avatars.map((img) => (
                  <img
                    key={img}
                    src={img}
                    alt="Avatar"
                    className={`w-10 h-10 rounded-full cursor-pointer avatar-option ${avatar === img ? 'avatar-selected' : ''}`}
                    onClick={() => setAvatar(img)}
                  />
                ))}
              </div>
            </div>
            <div className="mb-4">
              <label className="block text-sm mb-1">Comentário</label>
              <textarea
                value={comment}
                onChange={(e) => setComment(e.target.value)}
                placeholder="Escreva seu comentário..."
                className="w-full p-2 bg-gray-800 text-white rounded neon-border focus:outline-none text-sm"
                rows="4"
              ></textarea>
            </div>
            <div className="flex space-x-2">
              <button
                onClick={handleSubmit}
                className="px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-500 text-gray-900 font-semibold rounded-full text-sm"
              >
                Publicar
              </button>
              <button
                onClick={onClose}
                className="px-4 py-2 bg-gray-700 text-white rounded-full hover:bg-gray-600 text-sm"
              >
                Cancelar
              </button>
            </div>
          </div>
        </div>
      );
    }

    function Comments({ openCommentModal }) {
      const [comments, setComments] = React.useState([
        { id: 1, user: "João Silva", avatar: "https://i.pravatar.cc/40?img=1", text: "Vídeo incrível, continue assim!", timestamp: "2 horas atrás", replies: [], isVip: true },
        { id: 2, user: "Maria Oliveira", avatar: "https://i.pravatar.cc/40?img=2", text: "Adorei o conteúdo, muito bem feito!", timestamp: "1 hora atrás", replies: [], isVip: false },
        { id: 3, user: "Pedro Santos", avatar: "https://i.pravatar.cc/40?img=3", text: "Que edição top!", timestamp: "3 horas atrás", replies: [], isVip: false },
        { id: 4, user: "Ana Costa", avatar: "https://i.pravatar.cc/40?img=4", text: "Gostei muito, parabéns!", timestamp: "4 horas atrás", replies: [], isVip: false },
        { id: 5, user: "Lucas Pereira", avatar: "https://i.pravatar.cc/40?img=5", text: "Vídeo muito legal!", timestamp: "5 horas atrás", replies: [], isVip: true },
        { id: 6, user: "Clara Mendes", avatar: "https://i.pravatar.cc/40?img=6", text: "Amei o estilo!", timestamp: "6 horas atrás", replies: [], isVip: false },
        { id: 7, user: "Rafael Almeida", avatar: "https://i.pravatar.cc/40?img=7", text: "Top demais!", timestamp: "7 horas atrás", replies: [], isVip: false },
        { id: 8, user: "Sofia Lima", avatar: "https://i.pravatar.cc/40?img=8", text: "Muito bem produzido!", timestamp: "8 horas atrás", replies: [], isVip: false },
        { id: 9, user: "Gabriel Ferreira", avatar: "https://i.pravatar.cc/40?img=9", text: "Show de bola!", timestamp: "9 horas atrás", replies: [], isVip: false },
        { id: 10, user: "Laura Ribeiro", avatar: "https://i.pravatar.cc/40?img=10", text: "Parabéns pelo trabalho!", timestamp: "10 horas atrás", replies: [], isVip: true },
        { id: 11, user: "Mateus Gonçalves", avatar: "https://i.pravatar.cc/40?img=11", text: "Vídeo épico!", timestamp: "11 horas atrás", replies: [], isVip: false },
        { id: 12, user: "Isabela Duarte", avatar: "https://i.pravatar.cc/40?img=12", text: "Amei a vibe!", timestamp: "12 horas atrás", replies: [], isVip: false },
        { id: 13, user: "Thiago Martins", avatar: "https://i.pravatar.cc/40?img=13", text: "Muito bom, cara!", timestamp: "13 horas atrás", replies: [], isVip: false },
        { id: 14, user: "Beatriz Souza", avatar: "https://i.pravatar.cc/40?img=14", text: "Que conteúdo foda!", timestamp: "14 horas atrás", replies: [], isVip: false },
        { id: 15, user: "Felipe Correia", avatar: "https://i.pravatar.cc/40?img=15", text: "Mandou bem!", timestamp: "15 horas atrás", replies: [], isVip: true },
        { id: 16, user: "Camila Torres", avatar: "https://i.pravatar.cc/40?img=16", text: "Vídeo sensacional!", timestamp: "16 horas atrás", replies: [], isVip: false },
        { id: 17, user: "Bruno Carvalho", avatar: "https://i.pravatar.cc/40?img=17", text: "Gostei pra caramba!", timestamp: "17 horas atrás", replies: [], isVip: false },
        { id: 18, user: "Letícia Barbosa", avatar: "https://i.pravatar.cc/40?img=18", text: "Muito top!", timestamp: "18 horas atrás", replies: [], isVip: false },
        { id: 19, user: "Diego Rocha", avatar: "https://i.pravatar.cc/40?img=19", text: "Vídeo perfeito!", timestamp: "19 horas atrás", replies: [], isVip: false },
        { id: 20, user: "Juliana Freire", avatar: "https://i.pravatar.cc/40?img=20", text: "Arrasou no vídeo!", timestamp: "20 horas atrás", replies: [], isVip: true },
      ]);
      const [showCommentModal, setShowCommentModal] = React.useState(false);
      const [replyText, setReplyText] = React.useState({});
      const [showReply, setShowReply] = React.useState({});

      const handleCommentSubmit = ({ name, avatar, comment }) => {
        setComments([
          ...comments,
          {
            id: comments.length + 1,
            user: name,
            avatar,
            text: comment,
            timestamp: "Agora",
            replies: [],
            isVip: false,
          },
        ]);
      };

      const handleReplySubmit = (commentId, e) => {
        e.preventDefault();
        if (replyText[commentId]?.trim()) {
          const updatedComments = comments.map(comment => {
            if (comment.id === commentId) {
              return {
                ...comment,
                replies: [
                  ...comment.replies,
                  {
                    id: comment.replies.length + 1,
                    user: "Você",
                    text: replyText[commentId],
                    timestamp: "Agora",
                    avatar: comment.avatar,
                  },
                ],
              };
            }
            return comment;
          });
          setComments(updatedComments);
          setReplyText({ ...replyText, [commentId]: "" });
          setShowReply({ ...showReply, [commentId]: false });
        }
      };

      const toggleReply = (commentId) => {
        setShowReply({ ...showReply, [commentId]: !showReply[commentId] });
      };

      const openModal = () => {
        setShowCommentModal(true);
        if (onCommentClick) onCommentClick();
      };

      return (
        <div className="comment-section max-w-5xl mx-auto mt-12 px-4 sm:px-2">
          <h2 className="text-2xl sm:text-xl font-semibold neon-blue mb-6">Comentários</h2>
          <div className="mb-8">
            <button
              onClick={openModal}
              className="w-full p-4 bg-gray-800 text-white rounded-lg neon-border text-left text-sm"
            >
              Adicione um comentário...
            </button>
            <CommentFormModal
              isOpen={showCommentModal}
              onClose={() => setShowCommentModal(false)}
              onSubmit={handleCommentSubmit}
            />
          </div>
          {comments.map((comment) => (
            <div
              key={comment.id}
              className="comment-box mb-6 p-6 sm:p-4 bg-gray-800 rounded-lg neon-border comment-enter comment-enter-active"
            >
              <div className="flex items-start space-x-4 sm:space-x-2">
                <img
                  src={comment.avatar}
                  alt={comment.user}
                  className="w-10 h-10 sm:w-8 sm:h-8 rounded-full border-2 border-neon-blue"
                />
                <div className="flex-1">
                  <div className="flex items-center space-x-2 flex-wrap">
                    <p className="font-semibold neon-blue text-sm">{comment.user}</p>
                    {comment.isVip && <span className="vip-badge text-xs">Membro VIP</span>}
                    <span className="text-gray-400 text-xs">{comment.timestamp}</span>
                  </div>
                  <p className="mt-1 text-gray-200 text-sm">{comment.text}</p>
                  <button
                    onClick={() => toggleReply(comment.id)}
                    className="mt-2 text-xs text-neon-blue hover:underline"
                  >
                    Responder
                  </button>
                  {showReply[comment.id] && (
                    <div className="mt-4">
                      <textarea
                        value={replyText[comment.id] || ""}
                        onChange={(e) => setReplyText({ ...replyText, [comment.id]: e.target.value })}
                        placeholder="Escreva sua resposta..."
                        className="w-full p-3 bg-gray-900 text-white rounded-lg neon-border focus:outline-none focus:ring-2 focus:ring-neon-blue transition text-sm"
                        rows="3"
                      ></textarea>
                      <div className="flex space-x-2 mt-2">
                        <button
                          onClick={(e) => handleReplySubmit(comment.id, e)}
                          className="px-4 py-1 bg-gradient-to-r from-cyan-500 to-blue-500 text-gray-900 font-semibold rounded-full text-xs"
                        >
                          Enviar
                        </button>
                        <button
                          onClick={() => toggleReply(comment.id)}
                          className="px-4 py-1 bg-gray-700 text-white rounded-full hover:bg-gray-600 text-xs"
                        >
                          Cancelar
                        </button>
                      </div>
                    </div>
                  )}
                  {comment.replies.length > 0 && (
                    <div className="mt-4 ml-8 sm:ml-4">
                      {comment.replies.map((reply) => (
                        <div key={reply.id} className="flex items-start space-x-3 mt-3">
                          <img
                            src={reply.avatar || "https://wallpapers.com/images/hd/cute-avatar-profile-picture-23yuqpb8wz1dqqqv.jpg"}
                            alt={reply.user}
                            className="w-8 h-8 sm:w-6 sm:h-6 rounded-full border-2 border-neon-blue"
                          />
                          <div>
                            <div className="flex items-center space-x-2">
                              <p className="font-semibold neon-blue text-sm">{reply.user}</p>
                              <span className="text-gray-400 text-xs">{reply.timestamp}</span>
                            </div>
                            <p className="text-gray-200 text-sm">{reply.text}</p>
                          </div>
                        </div>
                      ))}
                    </div>
                  )}
                </div>
              </div>
            </div>
          ))}
        </div>
      );
    }

    function Feedback() {
      return (
        <div className="feedback-section max-w-5xl mx-auto mt-12 mb-12 px-4 sm:px-2">
          <h2 className="text-2xl sm:text-xl font-semibold neon-blue mb-6">Feedback</h2>
          <textarea
            placeholder="Envie seu feedback sobre o vídeo..."
            className="w-full p-4 bg-gray-800 text-white rounded-lg neon-border focus:outline-none focus:ring-2 focus:ring-neon-blue transition text-sm"
            rows="5"
          ></textarea>
          <button className="mt-3 px-6 py-2 bg-gradient-to-r from-cyan-500 to-blue-500 text-gray-900 font-semibold rounded-full text-sm">
            Enviar
          </button>
        </div>
      );
    }

    function App() {
      const [showCommentModal, setShowCommentModal] = React.useState(false);

      const handleCommentClick = () => {
        setShowCommentModal(true);
      };

      return (
        <ErrorBoundary>
          <div>
            <Header />
            <main className="p-6 sm:p-4">
              <VideoPlayer />
              <VideoActions onCommentClick={handleCommentClick} />
              <Comments openCommentModal={() => setShowCommentModal(true)} />
              <Feedback />
            </main>
            <footer className="bg-gray-900 p-4 text-center text-gray-400 text-sm">
              Desenvolvido por Matheus Henrique Nunes
            </footer>
          </div>
        </ErrorBoundary>
      );
    }

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
